# Desafio de Backend - Magalu üì¨
Este projeto √© uma solu√ß√£o para um desafio de backend da empresa Magalu, focado no agendamento e envio de notifica√ß√µes. A aplica√ß√£o permite o agendamento, cancelamento e envio de notifica√ß√µes com base em regras definidas, utilizando Java com Spring Boot.

## üõ† Tecnologias Utilizadas
* Java 21
* Spring Boot
* Spring Data JPA
* Spring Scheduler
* MYSQL,POSTGRES,H2 Database (para fins de desenvolvimento e testes)

## üìÅ Estrutura do Projeto
Principais Componentes
1. NotificationService

O NotificationService √© respons√°vel por gerenciar as notifica√ß√µes, desde o agendamento at√© o envio. Suas principais funcionalidades incluem:

* Agendamento de Notifica√ß√µes: Salva uma notifica√ß√£o agendada no banco de dados.
* Cancelamento de Notifica√ß√µes: Cancela uma notifica√ß√£o com base no seu ID.
* Verifica√ß√£o e Envio de Notifica√ß√µes: Verifica as notifica√ß√µes pendentes e envia aquelas cuja data e hora s√£o anteriores ao tempo atual.

2. ScheduleNotificationDto

Este DTO encapsula os dados necess√°rios para criar uma nova notifica√ß√£o, convertendo-os para uma entidade de Notification.

3. MagaluTaskScheduler

O MagaluTaskScheduler √© respons√°vel por verificar e processar as notifica√ß√µes periodicamente. A cada minuto, o agendador verifica as notifica√ß√µes pendentes e chama o servi√ßo para process√°-las.

Funcionamento Interno

* As notifica√ß√µes s√£o agendadas e armazenadas no banco de dados.
* O MagaluTaskScheduler utiliza o Spring Scheduler para rodar uma tarefa a cada minuto, verificando se h√° notifica√ß√µes pendentes para envio.
* Ap√≥s o envio, o status da notifica√ß√£o √© atualizado para "SUCCESS". Em caso de falha, o status √© marcado como "ERROR" e o sistema pode tentar reenviar.

C√≥digo de Exemplo
Aqui est√° uma vis√£o geral do c√≥digo do agendador de tarefas:

```
@Component
public class MagaluTaskScheduler {

    private static final Logger logger = LoggerFactory.getLogger(MagaluTaskScheduler.class);

    private final NotificationService notificationService;

    public MagaluTaskScheduler(NotificationService notificationService) {
        this.notificationService = notificationService;
    }

    @Scheduled(fixedDelay = 1, timeUnit = TimeUnit.MINUTES)
    public void checkTasks() {
        var dateTime = LocalDateTime.now();
        logger.info("Running at {}", dateTime);
        notificationService.checkAndSend(dateTime);
    }
}

```
## üöÄ Como Executar o Projeto
* Pr√©-requisitos
* JDK 21

Passos

1. Clone o reposit√≥rio:
```
git clone https://github.com/seu-usuario/desafio-magalu-backend.git

```
2. Acesse a aplica√ß√£o localmente em:
```
 http://localhost:8080
```
## üì¶ Exemplos de Uso
* Agendar uma Notifica√ß√£o: Envie uma requisi√ß√£o POST com os detalhes da notifica√ß√£o para o endpoint /api/notifications/schedule.
* Cancelar uma Notifica√ß√£o: Envie uma requisi√ß√£o DELETE para /api/notifications/{id}.
* Verificar e Enviar Notifica√ß√µes: O agendador de tarefas roda automaticamente a cada minuto para processar as notifica√ß√µes pendentes.